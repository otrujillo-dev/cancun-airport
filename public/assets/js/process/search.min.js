(function(){var t,e;function n(t,e){var n,r={}.hasOwnProperty;for(n in e)r.call(e,n)&&(t[n]=e[n]);return t}t=function(t,e,n){var r;for(null==n&&(n=document),r=t;r&&r!==n;)r=r.parentNode;if(r!==n)return null;for(r=t;r&&r!==n&&r.matches&&!r.matches(e);)r=r.parentNode;return r!==n||n.matches&&n.matches(e)?r:null},(e=function(t){var e;return null==t&&(t={}),this.evtHandler={},this.opt=n({delay:300,autoZ:!0,baseZ:3e3,escape:!0,byDisplay:!0},t),t.zmgr&&this.zmgr(t.zmgr),this.promises=[],this._r=t.root?"string"==typeof t.root?document.querySelector(t.root):t.root:((e=document.createElement("div")).innerHTML='<div class="base"></div>',e),this.cls="string"==typeof t.type?t.type.split(" "):t.type,this.resident=null!=t.resident&&t.resident,this.inPlace=null==t.inPlace||t.inPlace,this.container="string"==typeof t.container?document.querySelector(t.container):t.container,this._r.content&&this._r.content.nodeType===Element.DOCUMENT_FRAGMENT_NODE||this.init(),this}).prototype=n(Object.create(Object.prototype),{root:function(){return this.inited||this.init(),this._r},init:function(){var e,n,r=this;if(!this.inited)return this.inited=!0,this.inPlace||(this._r.parentNode.removeChild(this._r),document.body.appendChild(this._r)),!this.resident&&this._r.parentNode&&(this._c=document.createComment(" ldcover placeholder "),this._r.parentNode.insertBefore(this._c,this._r),this._r.parentNode.removeChild(this._r)),this._r.content&&this._r.content.nodeType===Element.DOCUMENT_FRAGMENT_NODE&&(this._r=this._r.content.cloneNode(!0).childNodes[0],this._r.parentNode.removeChild(this._r)),(e=this._r.getAttribute("data-lock"))&&"true"===e&&(this.opt.lock=!0),this.inner=this._r.querySelector(".inner"),this.base=this._r.querySelector(".base"),this._r.classList.add.apply(this._r.classList,["ldcv"].concat(this.cls||[])),this.opt.byDisplay&&(this._r.style.display="none"),n=null,this._r.addEventListener("mousedown",this.el_md=function(t){return n=t.target}),this._r.addEventListener("click",this.el_c=function(e){var i,s;return n!==r._r||r.opt.lock?t(e.target,"*[data-ldcv-cancel]",r._r)?(e.stopPropagation(),r.cancel()):(i=t(e.target,"*[data-ldcv-set]",r._r))&&null!=(s=i.getAttribute("data-ldcv-set"))&&!t(i,".disabled",r._r)?(e.stopPropagation(),r.set(s)):void 0:(e.stopPropagation(),r.toggle(!1))})},zmgr:function(t){return null!=t?this._zmgr=t:this._zmgr},append:function(t){var e=this._r.childNodes[0];return(e&&e.classList.contains("base")?e:this._r).appendChild(t)},get:function(t){var e=this;return new Promise((function(n,r){return e.promises.push({res:n,rej:r}),e.toggle(!0,t)}))},cancel:function(t,e){if(null==e&&(e=!0),this.promises.splice(0).map((function(e){return e.rej(t||((e=new Error).name="lderror",e.id=999,e))})),e)return this.toggle(!1)},set:function(t,e){if(null==e&&(e=!0),this.promises.splice(0).map((function(e){return e.res(t)})),e)return this.toggle(!1)},isOn:function(){return this._r.classList.contains("active")},lock:function(){return this.opt.lock=!0},toggle:function(t,n){var r=this;return new Promise((function(i,s){var o;return r.inited||r.init(),t&&null!=n&&r.fire("data",n),null==t&&r._r.classList.contains("running")||null!=t&&r._r.classList.contains("active")===!!t?i():((o=null!=t?t:!r._r.classList.contains("active"))&&!r._r.parentNode&&(null==r.container&&r._c&&r._c.parentNode?r._c.parentNode.insertBefore(r._r,r._c):(r.container||document.body).appendChild(r._r)),r._r.classList.add("running"),r.opt.byDisplay&&(r._r.style.display="block"),r._r.classList.contains("inline")&&(o?(r.el_h=function(t){if(!r._r.contains(t.target))return r.toggle(!1)},window.addEventListener("click",r.el_h)):r.el_h&&(window.removeEventListener("click",r.el_h),r.el_h=null)),!o&&r.el_esc&&(document.removeEventListener("keyup",r.el_esc),r.el_esc=null),setTimeout((function(){var t;return r._r.classList.toggle("active",o),!r.opt.lock&&r.opt.escape&&o&&!r.el_esc&&(r.el_esc=function(t){if(27===t.keyCode&&(t=e.popups)[t.length-1]===r)return r.toggle(!1)},document.addEventListener("keyup",r.el_esc)),r.opt.animation&&r.inner&&r.inner.classList[o?"add":"remove"].apply(r.inner.classList,r.opt.animation.split(" ")),o?e.popups.push(r):0<=(t=e.popups.indexOf(r))&&e.popups.splice(t,1),r.opt.autoZ&&(o?r._r.style.zIndex=r.z=(r._zmgr||e._zmgr).add(r.opt.baseZ):((r._zmgr||e._zmgr).remove(r.z),delete r.z)),r.opt.transformFix&&!o&&r._r.classList.remove("shown"),setTimeout((function(){return r._r.classList.remove("running"),r.opt.transformFix&&o&&r._r.classList.add("shown"),!o&&r.opt.byDisplay&&(r._r.style.display="none"),o||!r._r.parentNode||r.resident||r._r.parentNode.removeChild(r._r),!o&&r.opt.autoZ&&(r._r.style.zIndex=""),r.fire("toggled."+(o?"on":"off"))}),r.opt.delay),r.promises.length&&!o&&r.set(void 0,!1),r.fire("toggle."+(o?"on":"off")),i()}),50))}))},on:function(t,e){var n=this;return(Array.isArray(t)?t:[t]).map((function(t){var r;return((r=n.evtHandler)[t]||(r[t]=[])).push(e)}))},fire:function(t){for(var e,n,r,i,s=[],o=[],l=1,c=arguments.length;l<c;++l)o.push(arguments[l]);for(e=o,l=0,r=(n=this.evtHandler[t]||[]).length;l<r;++l)i=n[l],s.push(i.apply(this,e));return s},destroy:function(t){var e=this;return null==t&&(t={}),this.toggle(!1).then((function(){return e._c&&(t.removeNode||e._c.parentNode.insertBefore(e._r,e._c),e._c.parentNode.removeChild(e._c)),e._r.removeEventListener("mousedown",e.el_md),e._r.removeEventListener("click",e.el_c)}))}}),n(e,{popups:[],_zmgr:{add:function(t){return(this.s||(this.s=[])).push(t=Math.max(t||0,((t=this.s)[t.length-1]||0)+1)),t},remove:function(t){if(!((t=(this.s||(this.s=[])).indexOf(t))<0))return this.s.splice(t,1)}},zmgr:function(t){return null!=t?this._zmgr=t:this._zmgr}}),"undefined"!=typeof module&&null!==module?module.exports=e:window&&(window.ldcover=e)}).call(this);var ldcv=new ldcover({root:".ldcv",animation:"ld ld-bounce-in"});function finish(){ldcv.set(Date.now())}
